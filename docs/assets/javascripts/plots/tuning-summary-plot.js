document$.subscribe(() => {
  const elem = document.getElementById('tuning-summary-plot')
  if (elem?.tagName !== 'DIV')
    return;

  Plotly.newPlot(elem, [
    {
      name: '三分损益法',
      y: [1.000000, 1.067871, 1.125000, 1.201355, 1.265625, 1.351524, 1.423828, 1.500000, 1.601807, 1.687500, 1.802032, 1.898438, 2.027287]
    },
    {
      name: '五度相生律',
      x: [0, 1, 2, 3, 4, 5, 6, 6, 7, 8, 9, 10, 11, 12, 13],
      y: [1.000000, 1.053498, 1.125000, 1.185185, 1.265625, 1.333333, 1.404664, 1.423828, 1.500000, 1.580247, 1.687500, 1.777778, 1.898438, 2.000000]
    },
    {
      name: '纯律',
      y: [1.000000, 1.066667, 1.125000, 1.200000, 1.250000, 1.333333, 1.406250, 1.500000, 1.600000, 1.666667, 1.800000, 1.875000, 2.000000]
    },
    {
      name: '十二平均律',
      y: [1.000000, 1.059463, 1.122462, 1.189207, 1.259921, 1.334840, 1.414214, 1.498307, 1.587401, 1.681793, 1.781797, 1.887749, 2.000000]
    }
  ], {
    title: '音律小结',
    xaxis: {
      title: '乐音',
      tickvals: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
      ticktext: ['Ⅰ', 'Ⅱ', 'Ⅲ', 'Ⅳ', 'Ⅴ', 'Ⅵ', 'Ⅶ', 'Ⅷ', 'Ⅸ', 'Ⅹ', 'Ⅺ', 'Ⅻ', 'ⅩⅢ'],
      zeroline: false
    },
    yaxis: {
      title: '频比',
      dtick: 0.1
    }
  })
});
